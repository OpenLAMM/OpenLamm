{"version":3,"file":"makeStyles.cjs.js","sources":["../../../packages/core/src/makeStyles.ts"],"sourcesContent":["import { debugData, isDevToolsEnabled, getSourceURLfromError } from './devtools';\nimport { insertionFactory } from './insertionFactory';\nimport { resolveStyleRulesForSlots } from './resolveStyleRulesForSlots';\nimport { reduceToClassNameForSlots } from './runtime/reduceToClassNameForSlots';\nimport type { CSSClassesMapBySlot, CSSRulesByBucket, GriffelRenderer, StylesBySlots } from './types';\nimport type { GriffelInsertionFactory } from './types';\n\nexport interface MakeStylesOptions {\n  dir: 'ltr' | 'rtl';\n  renderer: GriffelRenderer;\n}\n\nexport function makeStyles<Slots extends string | number>(\n  stylesBySlots: StylesBySlots<Slots>,\n  factory: GriffelInsertionFactory = insertionFactory,\n) {\n  const insertStyles = factory();\n\n  let classesMapBySlot: CSSClassesMapBySlot<Slots> | null = null;\n  let cssRules: CSSRulesByBucket | null = null;\n\n  let ltrClassNamesForSlots: Record<Slots, string> | null = null;\n  let rtlClassNamesForSlots: Record<Slots, string> | null = null;\n\n  let sourceURL: string | undefined;\n  if (process.env.NODE_ENV !== 'production' && isDevToolsEnabled) {\n    sourceURL = getSourceURLfromError();\n  }\n\n  let classNameHashSalt: string;\n\n  function computeClasses(options: MakeStylesOptions): Record<Slots, string> {\n    const { dir, renderer } = options;\n\n    if (classesMapBySlot === null) {\n      [classesMapBySlot, cssRules] = resolveStyleRulesForSlots(stylesBySlots, renderer.classNameHashSalt);\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (renderer.classNameHashSalt) {\n          if (classNameHashSalt !== renderer.classNameHashSalt) {\n            console.error(\n              [\n                '@griffel/core:',\n                '\\n\\n',\n                'A provided renderer has different \"classNameHashSalt\".',\n                'This is not supported and WILL cause issues with classnames generation.',\n                'Ensure that all renderers created with \"createDOMRenderer()\" have the same \"classNameHashSalt\".',\n              ].join(' '),\n            );\n          }\n\n          classNameHashSalt = renderer.classNameHashSalt;\n        }\n      }\n    }\n\n    const isLTR = dir === 'ltr';\n\n    if (isLTR) {\n      if (ltrClassNamesForSlots === null) {\n        ltrClassNamesForSlots = reduceToClassNameForSlots(classesMapBySlot, dir);\n      }\n    } else {\n      if (rtlClassNamesForSlots === null) {\n        rtlClassNamesForSlots = reduceToClassNameForSlots(classesMapBySlot, dir);\n      }\n    }\n\n    insertStyles(renderer, cssRules!);\n\n    const classNamesForSlots = isLTR\n      ? (ltrClassNamesForSlots as Record<Slots, string>)\n      : (rtlClassNamesForSlots as Record<Slots, string>);\n\n    if (process.env.NODE_ENV !== 'production' && isDevToolsEnabled) {\n      debugData.addSequenceDetails(classNamesForSlots!, sourceURL);\n    }\n\n    return classNamesForSlots;\n  }\n\n  return computeClasses;\n}\n"],"names":["makeStyles","stylesBySlots","factory","insertionFactory","insertStyles","classesMapBySlot","cssRules","ltrClassNamesForSlots","rtlClassNamesForSlots","sourceURL","process","env","NODE_ENV","isDevToolsEnabled","getSourceURLfromError","classNameHashSalt","computeClasses","options","dir","renderer","resolveStyleRulesForSlots","console","error","join","isLTR","reduceToClassNameForSlots","classNamesForSlots","debugData","addSequenceDetails"],"mappings":";;;;;;;;;;SAYgBA,UAAUA,CACxBC,aAAmC,EACnCC,UAAmCC,iCAAgB,EAAA;AAEnD,EAAA,MAAMC,YAAY,GAAGF,OAAO,EAAE,CAAA;EAE9B,IAAIG,gBAAgB,GAAsC,IAAI,CAAA;EAC9D,IAAIC,QAAQ,GAA4B,IAAI,CAAA;EAE5C,IAAIC,qBAAqB,GAAiC,IAAI,CAAA;EAC9D,IAAIC,qBAAqB,GAAiC,IAAI,CAAA;AAE9D,EAAA,IAAIC,SAA6B,CAAA;EACjC,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IAAIC,mCAAiB,EAAE;IAC9DJ,SAAS,GAAGK,2CAAqB,EAAE,CAAA;AACrC,GAAA;AAEA,EAAA,IAAIC,iBAAyB,CAAA;EAE7B,SAASC,cAAcA,CAACC,OAA0B,EAAA;IAChD,MAAM;MAAEC,GAAG;AAAEC,MAAAA,QAAAA;AAAU,KAAA,GAAGF,OAAO,CAAA;IAEjC,IAAIZ,gBAAgB,KAAK,IAAI,EAAE;AAC7B,MAAA,CAACA,gBAAgB,EAAEC,QAAQ,CAAC,GAAGc,mDAAyB,CAACnB,aAAa,EAAEkB,QAAQ,CAACJ,iBAAiB,CAAC,CAAA;AAEnG,MAAA,IAAIL,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;QACzC,IAAIO,QAAQ,CAACJ,iBAAiB,EAAE;AAC9B,UAAA,IAAIA,iBAAiB,KAAKI,QAAQ,CAACJ,iBAAiB,EAAE;AACpDM,YAAAA,OAAO,CAACC,KAAK,CACX,CACE,gBAAgB,EAChB,MAAM,EACN,wDAAwD,EACxD,yEAAyE,EACzE,iGAAiG,CAClG,CAACC,IAAI,CAAC,GAAG,CAAC,CACZ,CAAA;AACH,WAAA;UAEAR,iBAAiB,GAAGI,QAAQ,CAACJ,iBAAiB,CAAA;AAChD,SAAA;AACF,OAAA;AACF,KAAA;AAEA,IAAA,MAAMS,KAAK,GAAGN,GAAG,KAAK,KAAK,CAAA;AAE3B,IAAA,IAAIM,KAAK,EAAE;MACT,IAAIjB,qBAAqB,KAAK,IAAI,EAAE;AAClCA,QAAAA,qBAAqB,GAAGkB,mDAAyB,CAACpB,gBAAgB,EAAEa,GAAG,CAAC,CAAA;AAC1E,OAAA;AACF,KAAC,MAAM;MACL,IAAIV,qBAAqB,KAAK,IAAI,EAAE;AAClCA,QAAAA,qBAAqB,GAAGiB,mDAAyB,CAACpB,gBAAgB,EAAEa,GAAG,CAAC,CAAA;AAC1E,OAAA;AACF,KAAA;AAEAd,IAAAA,YAAY,CAACe,QAAQ,EAAEb,QAAS,CAAC,CAAA;AAEjC,IAAA,MAAMoB,kBAAkB,GAAGF,KAAK,GAC3BjB,qBAA+C,GAC/CC,qBAA+C,CAAA;IAEpD,IAAIE,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IAAIC,mCAAiB,EAAE;AAC9Dc,MAAAA,eAAS,CAACC,kBAAkB,CAACF,kBAAmB,EAAEjB,SAAS,CAAC,CAAA;AAC9D,KAAA;AAEA,IAAA,OAAOiB,kBAAkB,CAAA;AAC3B,GAAA;AAEA,EAAA,OAAOV,cAAc,CAAA;AACvB;;;;"}