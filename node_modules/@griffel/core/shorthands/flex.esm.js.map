{"version":3,"file":"flex.esm.js","sources":["../../../../packages/core/src/shorthands/flex.ts"],"sourcesContent":["import type * as CSS from 'csstype';\n\nimport type { GriffelStyle } from '@griffel/style-types';\nimport type { FlexInput } from './types';\n\ntype FlexStyle = Pick<GriffelStyle, 'flexGrow' | 'flexShrink' | 'flexBasis'>;\n\nconst isUnit = (value: CSS.Property.Flex | undefined) => typeof value === 'string' && /(\\d+(\\w+|%))/.test(value);\n\nconst isUnitless = (value: CSS.Property.Flex | undefined) => typeof value === 'number' && !Number.isNaN(value);\n\nconst isInitial = (value: CSS.Property.Flex | undefined) => value === 'initial';\n\nconst isAuto = (value: CSS.Property.Flex | undefined) => value === 'auto';\n\nconst isNone = (value: CSS.Property.Flex | undefined) => value === 'none';\n\nconst widthReservedKeys = ['content', 'fit-content', 'max-content', 'min-content'] as const;\ntype ReservedKeys = (typeof widthReservedKeys)[number];\ntype Width = ReservedKeys | string;\nconst isWidth = (value: CSS.Property.Flex | undefined) => widthReservedKeys.some(key => value === key) || isUnit(value);\n\n/**\n * A function that implements CSS spec conformant expansion for \"flex\".\n *\n * @example\n *   flex('auto')\n *   flex(1, '2.5rem')\n *   flex(0, 0, 'auto')\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/flex\n *\n * @deprecated Just use `{ flex: '1 1 0' }` instead as Griffel supports CSS shorthands now\n */\nexport function flex(...values: FlexInput): FlexStyle {\n  const isOneValueSyntax = values.length === 1;\n  const isTwoValueSyntax = values.length === 2;\n  const isThreeValueSyntax = values.length === 3;\n\n  if (isOneValueSyntax) {\n    const [firstValue] = values;\n\n    if (isInitial(firstValue)) {\n      return {\n        flexGrow: 0,\n        flexShrink: 1,\n        flexBasis: 'auto',\n      };\n    }\n\n    if (isAuto(firstValue)) {\n      return {\n        flexGrow: 1,\n        flexShrink: 1,\n        flexBasis: 'auto',\n      };\n    }\n\n    if (isNone(firstValue)) {\n      return {\n        flexGrow: 0,\n        flexShrink: 0,\n        flexBasis: 'auto',\n      };\n    }\n\n    if (isUnitless(firstValue)) {\n      return {\n        flexGrow: firstValue as number,\n        flexShrink: 1,\n        flexBasis: 0,\n      };\n    }\n\n    if (isWidth(firstValue)) {\n      return {\n        flexGrow: 1,\n        flexShrink: 1,\n        flexBasis: firstValue as Width,\n      };\n    }\n  }\n\n  if (isTwoValueSyntax) {\n    const [firstValue, secondValue] = values;\n\n    if (isUnitless(secondValue)) {\n      return {\n        flexGrow: firstValue,\n        flexShrink: secondValue,\n        flexBasis: 0,\n      };\n    }\n\n    if (isWidth(secondValue)) {\n      return {\n        flexGrow: firstValue,\n        flexShrink: 1,\n        flexBasis: secondValue as Width,\n      };\n    }\n  }\n\n  if (isThreeValueSyntax) {\n    const [firstValue, secondValue, thirdValue] = values;\n\n    if (isUnitless(firstValue) && isUnitless(secondValue) && (isAuto(thirdValue) || isWidth(thirdValue))) {\n      return {\n        flexGrow: firstValue,\n        flexShrink: secondValue,\n        flexBasis: thirdValue as Width,\n      };\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line no-console\n    console.error(\n      `The value passed to shorthands.flex did not match any flex property specs. The CSS styles were not generated. Please, check the flex documentation.`,\n    );\n  }\n  return {} as FlexStyle;\n}\n"],"names":["isUnit","value","test","isUnitless","Number","isNaN","isInitial","isAuto","isNone","widthReservedKeys","isWidth","some","key","flex","values","isOneValueSyntax","length","isTwoValueSyntax","isThreeValueSyntax","firstValue","flexGrow","flexShrink","flexBasis","secondValue","thirdValue","process","env","NODE_ENV","console","error"],"mappings":"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"}