{"version":3,"file":"stackTrace.cjs.js","sources":["../../../../../packages/core/src/devtools/react-render-tracker/stackTrace.ts"],"sourcesContent":["// TODO: duplicated from https://github.com/lahmatiy/react-render-tracker/blob/main/src/publisher/react-integration/utils/stackTrace.ts\n// once it is published as a standalone npm package, remove this file\n\n// Adopted version of StackTrace-Parser\n// https://github.com/errwischt/stacktrace-parser/blob/master/src/stack-trace-parser.js\n\nconst UNKNOWN_FUNCTION = '<unknown>';\n\ntype LineParseResult = null | {\n  name: string;\n  loc: string | null;\n};\n\nexport function parseStackTraceLine(line: string): LineParseResult {\n  return parseChrome(line) || parseGecko(line) || parseJSC(line);\n}\n\nconst chromeRe =\n  /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\/|[a-z]:\\\\|\\\\\\\\).*?)?\\)?\\s*$/i;\nconst chromeRe2 =\n  /^\\s*at ()((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\/|[a-z]:\\\\|\\\\\\\\).*?)\\s*$/i;\nconst chromeEvalRe = /\\((\\S*)\\)/;\n\nfunction parseChrome(line: string): LineParseResult {\n  const parts = chromeRe.exec(line) || chromeRe2.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  let loc = parts[2];\n  const isNative = loc && loc.indexOf('native') === 0; // start of line\n  const isEval = loc && loc.indexOf('eval') === 0; // start of line\n\n  const submatch = chromeEvalRe.exec(loc);\n  if (isEval && submatch != null) {\n    // throw out eval line/column and use top-most line/column number\n    loc = submatch[1]; // url\n  }\n\n  return {\n    loc: !isNative ? parts[2] : null,\n    name: parts[1] || UNKNOWN_FUNCTION,\n  };\n}\n\nconst geckoRe =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\\[native).*?|[^@]*bundle)\\s*$/i;\nconst geckoEvalRe = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\n\nfunction parseGecko(line: string): LineParseResult {\n  const parts = geckoRe.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  let loc = parts[3];\n  const isEval = loc && loc.indexOf(' > eval') > -1;\n\n  const submatch = geckoEvalRe.exec(loc);\n  if (isEval && submatch != null) {\n    // throw out eval line/column and use top-most line number\n    loc = submatch[1];\n  }\n\n  return {\n    loc: parts[3],\n    name: parts[1] || UNKNOWN_FUNCTION,\n  };\n}\n\nconst javaScriptCoreRe = /^\\s*(?:([^@]*)(?:\\((.*?)\\))?@)?(\\S.*?)\\s*$/i;\n\nfunction parseJSC(line: string): LineParseResult {\n  const parts = javaScriptCoreRe.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  return {\n    loc: parts[3],\n    name: parts[1] || UNKNOWN_FUNCTION,\n  };\n}\n"],"names":["UNKNOWN_FUNCTION","parseStackTraceLine","line","parseChrome","parseGecko","parseJSC","chromeRe","chromeRe2","chromeEvalRe","parts","exec","loc","isNative","indexOf","isEval","submatch","name","geckoRe","geckoEvalRe","javaScriptCoreRe"],"mappings":"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"}